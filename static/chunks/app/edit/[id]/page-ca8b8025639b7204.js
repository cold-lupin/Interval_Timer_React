(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[615],{322:(e,s,l)=>{Promise.resolve().then(l.bind(l,9604))},9604:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>f});var n=l(5155),i=l(2115),a=l(7168),t=l(8482),r=l(9852),d=l(2714),c=l(5784),m=l(9840),x=l(7550),u=l(4616),h=l(6874),o=l.n(h),j=l(5695),p=l(3655);let v={running:"달리기",walking:"걷기",rest:"휴식"},g=e=>{switch(e){case"walking":return[{value:"low",label:"천천히"},{value:"medium",label:"보통"},{value:"high",label:"빠르게"}];case"running":return[{value:"low",label:"조깅"},{value:"medium",label:"보통"},{value:"high",label:"전속력"}];case"rest":return[{value:"low",label:"휴식"}];default:return[{value:"low",label:"낮음"},{value:"medium",label:"보통"},{value:"high",label:"높음"}]}},b={running:"bg-red-100 text-red-800 border-red-200",walking:"bg-blue-100 text-blue-800 border-blue-200",rest:"bg-gray-100 text-gray-800 border-gray-200"};function f(e){let{params:s}=e,l=(0,j.useRouter)(),[h,f]=(0,i.useState)(null),[y,w]=(0,i.useState)(!0),[C,k]=(0,i.useState)(!1),[S,$]=(0,i.useState)(null),[W,F]=(0,i.useState)(!1),[I,J]=(0,i.useState)(null),[z,V]=(0,i.useState)({});(0,i.useEffect)(()=>{(()=>{let e=(0,p.iV)(s.id);e&&f(e),w(!1)})()},[s.id]);let _=e=>{let s=Math.floor(e/60);return"".concat(s,":").concat((e%60).toString().padStart(2,"0"))},q=(e,s)=>{if(!h)return;let l=n=>n.map(n=>n.id===e?{...n,...s}:"set"===n.type?{...n,items:l(n.items)}:n);f(e=>e?{...e,items:l(e.items)}:e)},E=e=>{J(e.id),"set"===e.type?V({repetitions:e.repetitions}):V({type:e.type,duration:e.duration,intensity:e.intensity||"medium"})},T=()=>{I&&Object.keys(z).length>0&&q(I,z),J(null),V({})},Z=()=>{J(null),V({})},A=(e,s,l,n)=>{if(!h)return;let i={id:(0,p.$C)(),type:e,duration:s,intensity:l};n?f(e=>e?{...e,items:M(e.items,n,i)}:e):f(e=>e?{...e,items:[...e.items,i]}:e)},O=(e,s)=>{if(!h)return;let l={id:(0,p.$C)(),type:"set",repetitions:e,items:[]};s?f(e=>e?{...e,items:M(e.items,s,l)}:e):f(e=>e?{...e,items:[...e.items,l]}:e)},M=(e,s,l)=>e.map(e=>e.id===s&&"set"===e.type?{...e,items:[...e.items,l]}:"set"===e.type?{...e,items:M(e.items,s,l)}:e),R=e=>{if(!h)return;let s=l=>l.filter(s=>s.id!==e).map(e=>"set"===e.type?{...e,items:s(e.items)}:e);f(e=>e?{...e,items:s(e.items)}:e)},B=(e,s)=>{if(!h)return;let l=n=>{let i=n.findIndex(s=>s.id===e);if(-1===i)return n.map(e=>"set"===e.type?{...e,items:l(e.items)}:e);let a=[...n];return"up"===s&&i>0?[a[i-1],a[i]]=[a[i],a[i-1]]:"down"===s&&i<n.length-1&&([a[i],a[i+1]]=[a[i+1],a[i]]),a};f(e=>e?{...e,items:l(e.items)}:e)},G=async()=>{if(h){if(console.log("[v0] 저장 시작, workout:",h),!h.name.trim()){console.log("[v0] 운동 이름이 비어있음"),alert("운동 이름을 입력해주세요.");return}if(0===h.items.length){console.log("[v0] 훈련 항목이 없음"),alert("최소 하나의 훈련을 추가해주세요.");return}F(!0);try{console.log("[v0] updateWorkout 호출 전");let e=(0,p.rW)(h);console.log("[v0] updateWorkout 결과:",e),e?(console.log("[v0] 저장 성공, 페이지 이동"),l.push("/view/".concat(h.id))):(console.log("[v0] updateWorkout이 null/undefined 반환"),alert("저장 중 오류가 발생했습니다."))}catch(e){console.error("[v0] 저장 중 오류:",e),alert("저장 중 오류가 발생했습니다.")}finally{F(!1)}}},H=function(e){var s;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;arguments.length>2&&arguments[2];let i="set"===e.type,d=I===e.id;return(0,n.jsxs)("div",{className:"".concat(l>0?"ml-6 border-l-2 border-border pl-4":""),children:[(0,n.jsx)(t.Zp,{className:"mb-2",children:(0,n.jsx)(t.Wu,{className:"p-3",children:d?(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:i?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-3 h-3 bg-accent rounded-full"}),(0,n.jsx)("span",{className:"font-medium",children:"세트"}),(0,n.jsx)("span",{children:"/"}),(0,n.jsx)(r.p,{type:"number",min:"1",value:z.repetitions||1,onChange:e=>V(s=>({...s,repetitions:Number.parseInt(e.target.value)||1})),className:"w-16 h-8",autoFocus:!0}),(0,n.jsx)("span",{className:"text-sm text-muted-foreground",children:"회 반복"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c.l6,{value:z.type||"running",onValueChange:e=>V(s=>({...s,type:e,intensity:"rest"===e?"low":"medium"})),children:[(0,n.jsx)(c.bq,{className:"w-20 h-8",children:(0,n.jsx)(c.yv,{})}),(0,n.jsxs)(c.gC,{children:[(0,n.jsx)(c.eb,{value:"running",children:"달리기"}),(0,n.jsx)(c.eb,{value:"walking",children:"걷기"}),(0,n.jsx)(c.eb,{value:"rest",children:"휴식"})]})]}),(0,n.jsxs)(c.l6,{value:z.intensity||"medium",onValueChange:e=>V(s=>({...s,intensity:e})),children:[(0,n.jsx)(c.bq,{className:"w-28 h-8",children:(0,n.jsx)(c.yv,{})}),(0,n.jsx)(c.gC,{children:g(z.type||"running").map(e=>(0,n.jsx)(c.eb,{value:e.value,children:e.label},e.value))})]}),(0,n.jsx)("span",{children:"/"}),(0,n.jsx)(r.p,{type:"number",min:"1",value:z.duration||60,onChange:e=>V(s=>({...s,duration:Number.parseInt(e.target.value)||1})),className:"w-16 h-8"}),(0,n.jsx)("span",{className:"text-sm text-muted-foreground",children:"초"})]})}),(0,n.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,n.jsx)(a.$,{variant:"ghost",size:"sm",className:"h-8 px-3 text-green-600",onClick:T,children:"확인"}),(0,n.jsx)(a.$,{variant:"ghost",size:"sm",className:"h-8 px-3 text-red-600",onClick:Z,children:"취소"})]})]}):(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-muted/50 rounded p-1 -m-1",onClick:()=>E(e),children:i?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-3 h-3 bg-accent rounded-full"}),(0,n.jsx)("span",{className:"font-medium",children:"세트"}),(0,n.jsx)("span",{children:"/"}),(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.repetitions,"회 반복"]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"inline-block px-2 py-1 rounded-md text-xs font-medium border ".concat(b[e.type]),children:v[e.type]}),(0,n.jsx)("span",{className:"text-sm font-medium",children:null===(s=g(e.type).find(s=>s.value===(e.intensity||"medium")))||void 0===s?void 0:s.label}),(0,n.jsx)("span",{children:"/"}),(0,n.jsx)("span",{className:"font-medium",children:_(e.duration)})]})}),i&&(0,n.jsx)(a.$,{variant:"ghost",size:"sm",className:"h-8 px-3",onClick:()=>{$(e.id),k(!0)},children:"추가"})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,n.jsxs)("div",{className:"flex gap-1",children:[(0,n.jsx)(a.$,{variant:"ghost",size:"sm",className:"h-8 px-3",onClick:()=>B(e.id,"up"),children:"▲ 위"}),(0,n.jsx)(a.$,{variant:"ghost",size:"sm",className:"h-8 px-3",onClick:()=>B(e.id,"down"),children:"▼ 아래"})]}),(0,n.jsx)("div",{className:"ml-4",children:(0,n.jsx)(a.$,{variant:"ghost",size:"sm",className:"h-8 px-3 text-destructive hover:text-destructive",onClick:()=>R(e.id),children:"삭제"})})]})]})})}),i&&e.items.length>0&&(0,n.jsx)("div",{className:"mb-2",children:e.items.map(s=>H(s,l+1,e.id))})]},e.id)};return y?(0,n.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"로딩 중..."})]})}):h?(0,n.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,n.jsx)("header",{className:"border-b border-border bg-card sticky top-0 z-10",children:(0,n.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(o(),{href:"/view/".concat(h.id),children:(0,n.jsxs)(a.$,{variant:"ghost",size:"sm",className:"gap-2",children:[(0,n.jsx)(x.A,{className:"w-4 h-4"}),"뒤로"]})}),(0,n.jsx)("h1",{className:"text-xl font-semibold",children:"타이머 수정"})]}),(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsx)(a.$,{onClick:G,disabled:W,children:W?"저장 중...":"저장"})})]})})}),(0,n.jsx)("main",{className:"container mx-auto px-4 py-6 max-w-4xl",children:(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsxs)(t.Zp,{children:[(0,n.jsx)(t.aR,{children:(0,n.jsx)(t.ZB,{children:"기본 정보"})}),(0,n.jsxs)(t.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(d.J,{htmlFor:"workout-name",children:"운동 이름"}),(0,n.jsx)(r.p,{id:"workout-name",placeholder:"예: HIIT 러닝",value:h.name,onChange:e=>f(s=>s?{...s,name:e.target.value}:s)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d.J,{htmlFor:"workout-description",children:"설명 (선택사항)"}),(0,n.jsx)(r.p,{id:"workout-description",placeholder:"예: 고강도 인터벌 훈련",value:h.description,onChange:e=>f(s=>s?{...s,description:e.target.value}:s)})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(d.J,{htmlFor:"warmup",children:"웜업 시간 (분)"}),(0,n.jsx)(r.p,{id:"warmup",type:"number",min:"0",value:Math.floor(h.warmupTime/60),onChange:e=>f(s=>s?{...s,warmupTime:60*Number.parseInt(e.target.value)||0}:s)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d.J,{htmlFor:"cooldown",children:"쿨다운 시간 (분)"}),(0,n.jsx)(r.p,{id:"cooldown",type:"number",min:"0",value:Math.floor(h.cooldownTime/60),onChange:e=>f(s=>s?{...s,cooldownTime:60*Number.parseInt(e.target.value)||0}:s)})]})]})]})]}),(0,n.jsxs)(t.Zp,{children:[(0,n.jsx)(t.aR,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(t.ZB,{children:"훈련 구성"}),(0,n.jsxs)(a.$,{onClick:()=>{$(null),k(!0)},className:"gap-2",children:[(0,n.jsx)(u.A,{className:"w-4 h-4"}),"추가"]})]})}),(0,n.jsx)(t.Wu,{children:0===h.items.length?(0,n.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,n.jsx)("p",{className:"mb-4",children:"아직 훈련이 추가되지 않았습니다."}),(0,n.jsx)("p",{className:"text-sm",children:'위의 "추가" 버튼을 눌러 첫 번째 훈련을 만들어보세요.'})]}):(0,n.jsx)("div",{className:"space-y-1",children:h.items.map(e=>H(e))})})]})]})}),(0,n.jsx)(m.lG,{open:C,onOpenChange:k,children:(0,n.jsxs)(m.Cf,{className:"sm:max-w-md",children:[(0,n.jsxs)(m.c7,{children:[(0,n.jsx)(m.L3,{children:S?"세트에 추가":"새 항목 추가"}),(0,n.jsx)(m.rr,{children:"훈련 또는 세트를 추가할 수 있습니다."})]}),(0,n.jsx)(N,{onAddExercise:(e,s,l)=>{A(e,s,l,S||void 0),k(!1)},onAddSet:e=>{O(e,S||void 0),k(!1)},onCancel:()=>k(!1)})]})})]}):(0,n.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center space-y-4",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"타이머를 찾을 수 없습니다"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"요청하신 타이머가 존재하지 않거나 삭제되었습니다."}),(0,n.jsx)(o(),{href:"/",children:(0,n.jsx)(a.$,{children:"홈으로 돌아가기"})})]})})}function N(e){let{onAddExercise:s,onAddSet:l,onCancel:t}=e,[m,x]=(0,i.useState)("exercise"),[u,h]=(0,i.useState)("running"),[o,j]=(0,i.useState)(60),[p,v]=(0,i.useState)(3),[b,f]=(0,i.useState)("medium");return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:[(0,n.jsxs)("div",{style:{flex:"1",minWidth:"160px"},children:[(0,n.jsx)(d.J,{children:"추가할 항목"}),(0,n.jsxs)(c.l6,{value:m,onValueChange:e=>x(e),children:[(0,n.jsx)(c.bq,{children:(0,n.jsx)(c.yv,{})}),(0,n.jsxs)(c.gC,{children:[(0,n.jsx)(c.eb,{value:"exercise",children:"훈련"}),(0,n.jsx)(c.eb,{value:"set",children:"세트"})]})]})]}),"exercise"===m&&(0,n.jsxs)("div",{style:{flex:"1",minWidth:"160px"},children:[(0,n.jsx)(d.J,{children:"운동 종류"}),(0,n.jsxs)(c.l6,{value:u,onValueChange:e=>{h(e),f("rest"===e?"low":"medium")},children:[(0,n.jsx)(c.bq,{children:(0,n.jsx)(c.yv,{})}),(0,n.jsxs)(c.gC,{children:[(0,n.jsx)(c.eb,{value:"running",children:"달리기"}),(0,n.jsx)(c.eb,{value:"walking",children:"걷기"}),(0,n.jsx)(c.eb,{value:"rest",children:"휴식"})]})]})]})]}),"exercise"===m?(0,n.jsxs)("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:[(0,n.jsxs)("div",{style:{flex:"1",minWidth:"160px"},children:[(0,n.jsx)(d.J,{children:"강도"}),(0,n.jsxs)(c.l6,{value:b,onValueChange:e=>f(e),children:[(0,n.jsx)(c.bq,{children:(0,n.jsx)(c.yv,{})}),(0,n.jsx)(c.gC,{children:g(u).map(e=>(0,n.jsx)(c.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,n.jsxs)("div",{style:{flex:"1",minWidth:"160px"},children:[(0,n.jsx)(d.J,{children:"시간 (초)"}),(0,n.jsx)(r.p,{type:"number",min:"1",value:o,onChange:e=>j(Number.parseInt(e.target.value)||1)})]})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)(d.J,{children:"반복 횟수"}),(0,n.jsx)(r.p,{type:"number",min:"1",value:p,onChange:e=>v(Number.parseInt(e.target.value)||1)})]}),(0,n.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,n.jsx)(a.$,{onClick:()=>{"exercise"===m?s(u,o,b):l(p)},className:"flex-1",children:"추가"}),(0,n.jsx)(a.$,{variant:"outline",onClick:t,className:"flex-1 bg-transparent",children:"취소"})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[274,570,849,441,684,358],()=>s(322)),_N_E=e.O()}]);