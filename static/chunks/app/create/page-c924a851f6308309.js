(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{2525:(e,s,l)=>{"use strict";l.d(s,{A:()=>a});let a=(0,l(9946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2777:(e,s,l)=>{Promise.resolve().then(l.bind(l,7754))},7754:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>k});var a=l(5155),i=l(2115),n=l(7168),t=l(8482),r=l(9852),d=l(2714),c=l(5784),m=l(9840),x=l(4616),h=l(5196),u=l(4416),o=l(7863),j=l(6474),p=l(2525),v=l(7550),g=l(6874),N=l.n(g),b=l(5695),y=l(3655);let f={running:"달리기",walking:"걷기",rest:"휴식"},w={running:"bg-red-100 text-red-800 border-red-200",walking:"bg-blue-100 text-blue-800 border-blue-200",rest:"bg-gray-100 text-gray-800 border-gray-200"},C={walking:[{value:"low",label:"천천히"},{value:"medium",label:"보통"},{value:"high",label:"빠르게"}],running:[{value:"low",label:"조깅"},{value:"medium",label:"보통"},{value:"high",label:"전속력"}],rest:[{value:"medium",label:"휴식"}]};function k(){let e=(0,b.useRouter)(),[s,l]=(0,i.useState)({name:"",description:"",warmupTime:300,cooldownTime:300,items:[]}),[g,k]=(0,i.useState)(!1),[F,$]=(0,i.useState)(null),[A,I]=(0,i.useState)(!1),[J,W]=(0,i.useState)(null),[z,T]=(0,i.useState)({}),V=e=>{let s=Math.floor(e/60);return"".concat(s,":").concat((e%60).toString().padStart(2,"0"))},_=(e,s)=>{let a=l=>l.map(l=>l.id===e?{...l,...s}:"set"===l.type?{...l,items:a(l.items)}:l);l(e=>({...e,items:a(e.items)}))},E=e=>{W(e.id),"set"===e.type?T({repetitions:e.repetitions}):T({type:e.type,intensity:e.intensity||"medium",duration:e.duration})},M=()=>{J&&Object.keys(z).length>0&&_(J,z),W(null),T({})},q=()=>{W(null),T({})},O=(e,s,a,i)=>{let n={id:(0,y.$C)(),type:e,intensity:s,duration:a};i?l(e=>({...e,items:R(e.items,i,n)})):l(e=>({...e,items:[...e.items,n]}))},Z=(e,s)=>{let a={id:(0,y.$C)(),type:"set",repetitions:e,items:[]};s?l(e=>({...e,items:R(e.items,s,a)})):l(e=>({...e,items:[...e.items,a]}))},R=(e,s,l)=>e.map(e=>e.id===s&&"set"===e.type?{...e,items:[...e.items,l]}:"set"===e.type?{...e,items:R(e.items,s,l)}:e),B=e=>{let s=l=>l.filter(s=>s.id!==e).map(e=>"set"===e.type?{...e,items:s(e.items)}:e);l(e=>({...e,items:s(e.items)}))},H=(e,s)=>{let a=l=>{let i=l.findIndex(s=>s.id===e);if(-1===i)return l.map(e=>"set"===e.type?{...e,items:a(e.items)}:e);let n=[...l];return"up"===s&&i>0?[n[i-1],n[i]]=[n[i],n[i-1]]:"down"===s&&i<l.length-1&&([n[i],n[i+1]]=[n[i+1],n[i]]),n};l(e=>({...e,items:a(e.items)}))},G=async()=>{if(!s.name.trim()){alert("운동 이름을 입력해주세요.");return}if(0===s.items.length){alert("최소 하나의 훈련을 추가해주세요.");return}I(!0);try{let l=(0,y._O)(s);e.push("/view/".concat(l.id))}catch(e){console.error("Error saving workout:",e),alert("저장 중 오류가 발생했습니다.")}finally{I(!1)}},L=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;arguments.length>2&&arguments[2];let l="set"===e.type,i=J===e.id;return(0,a.jsxs)("div",{className:"".concat(s>0?"ml-6 border-l-2 border-border pl-4":""),children:[(0,a.jsx)(t.Zp,{className:"mb-2",children:(0,a.jsx)(t.Wu,{className:"p-3",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:i?(0,a.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-accent rounded-full"}),(0,a.jsx)("span",{className:"font-medium",children:"세트"}),(0,a.jsx)("span",{children:"/"}),(0,a.jsx)(r.p,{type:"number",min:"1",value:z.repetitions||1,onChange:e=>T(s=>({...s,repetitions:Number.parseInt(e.target.value)||1})),className:"w-16 h-8",autoFocus:!0}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"회 반복"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.l6,{value:z.type||"running",onValueChange:e=>{T(s=>({...s,type:e,intensity:"medium"}))},children:[(0,a.jsx)(c.bq,{className:"w-20 h-8",children:(0,a.jsx)(c.yv,{})}),(0,a.jsxs)(c.gC,{children:[(0,a.jsx)(c.eb,{value:"running",children:"달리기"}),(0,a.jsx)(c.eb,{value:"walking",children:"걷기"}),(0,a.jsx)(c.eb,{value:"rest",children:"휴식"})]})]}),"rest"!==(z.type||"running")&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(c.l6,{value:z.intensity||"medium",onValueChange:e=>T(s=>({...s,intensity:e})),children:[(0,a.jsx)(c.bq,{className:"w-20 h-8",children:(0,a.jsx)(c.yv,{})}),(0,a.jsx)(c.gC,{children:C[z.type||"running"].map(e=>(0,a.jsx)(c.eb,{value:e.value,children:e.label},e.value))})]})}),(0,a.jsx)("span",{children:"/"}),(0,a.jsx)(r.p,{type:"number",min:"1",value:z.duration||60,onChange:e=>T(s=>({...s,duration:Number.parseInt(e.target.value)||1})),className:"w-16 h-8"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"초"})]})}):(0,a.jsx)("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-muted/50 rounded p-1 -m-1",onClick:()=>E(e),children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-accent rounded-full"}),(0,a.jsx)("span",{className:"font-medium",children:"세트"}),(0,a.jsx)("span",{children:"/"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.repetitions,"회 반복"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"inline-block px-2 py-1 rounded-md text-xs font-medium border ".concat(w[e.type]),children:f[e.type]}),(0,a.jsx)("span",{className:"text-sm font-medium",children:(0,y.Em)(e.type,e.intensity||"medium")}),(0,a.jsx)("span",{children:"/"}),(0,a.jsx)("span",{className:"font-medium",children:V(e.duration)})]})})}),!i&&l&&(0,a.jsxs)(n.$,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs",onClick:()=>{$(e.id),k(!0)},children:[(0,a.jsx)(x.A,{className:"w-3 h-3 mr-1"}),"추가"]})]}),(0,a.jsx)("div",{className:"flex items-center justify-end gap-1",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.$,{variant:"ghost",size:"sm",className:"h-8 px-3 text-green-600",onClick:M,children:[(0,a.jsx)(h.A,{className:"w-4 h-4 mr-1"}),"확인"]}),(0,a.jsxs)(n.$,{variant:"ghost",size:"sm",className:"h-8 px-3 text-red-600",onClick:q,children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-1"}),"취소"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.$,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs",onClick:()=>H(e.id,"up"),children:[(0,a.jsx)(o.A,{className:"w-3 h-3 mr-1"}),"위"]}),(0,a.jsxs)(n.$,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs",onClick:()=>H(e.id,"down"),children:[(0,a.jsx)(j.A,{className:"w-3 h-3 mr-1"}),"아래"]}),(0,a.jsx)("div",{className:"w-4"}),(0,a.jsxs)(n.$,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs text-destructive hover:text-destructive",onClick:()=>B(e.id),children:[(0,a.jsx)(p.A,{className:"w-3 h-3 mr-1"}),"삭제"]})]})})]})})}),l&&e.items.length>0&&(0,a.jsx)("div",{className:"mb-2",children:e.items.map(l=>L(l,s+1,e.id))})]},e.id)};return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("header",{className:"border-b border-border bg-card sticky top-0 z-10",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(N(),{href:"/",children:(0,a.jsxs)(n.$,{variant:"ghost",size:"sm",className:"gap-2",children:[(0,a.jsx)(v.A,{className:"w-4 h-4"}),"뒤로"]})}),(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"새 타이머 만들기"})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(n.$,{onClick:G,disabled:A,children:A?"저장 중...":"저장"})})]})})}),(0,a.jsx)("main",{className:"container mx-auto px-4 py-6 max-w-4xl",children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)(t.Zp,{children:[(0,a.jsx)(t.aR,{children:(0,a.jsx)(t.ZB,{children:"기본 정보"})}),(0,a.jsxs)(t.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"workout-name",children:"운동 이름"}),(0,a.jsx)(r.p,{id:"workout-name",placeholder:"예: HIIT 러닝",value:s.name,onChange:e=>l(s=>({...s,name:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"workout-description",children:"설명 (선택사항)"}),(0,a.jsx)(r.p,{id:"workout-description",placeholder:"예: 고강도 인터벌 훈련",value:s.description,onChange:e=>l(s=>({...s,description:e.target.value}))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"warmup",children:"웜업 시간 (분)"}),(0,a.jsx)(r.p,{id:"warmup",type:"number",min:"0",value:Math.floor(s.warmupTime/60),onChange:e=>l(s=>({...s,warmupTime:60*Number.parseInt(e.target.value)||0}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"cooldown",children:"쿨다운 시간 (분)"}),(0,a.jsx)(r.p,{id:"cooldown",type:"number",min:"0",value:Math.floor(s.cooldownTime/60),onChange:e=>l(s=>({...s,cooldownTime:60*Number.parseInt(e.target.value)||0}))})]})]})]})]}),(0,a.jsxs)(t.Zp,{children:[(0,a.jsx)(t.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(t.ZB,{children:"훈련 구성"}),(0,a.jsxs)(n.$,{onClick:()=>{$(null),k(!0)},className:"gap-2",children:[(0,a.jsx)(x.A,{className:"w-4 h-4"}),"추가"]})]})}),(0,a.jsx)(t.Wu,{children:0===s.items.length?(0,a.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,a.jsx)("p",{className:"mb-4",children:"아직 훈련이 추가되지 않았습니다."}),(0,a.jsx)("p",{className:"text-sm",children:'위의 "추가" 버튼을 눌러 첫 번째 훈련을 만들어보세요.'})]}):(0,a.jsx)("div",{className:"space-y-1",children:s.items.map(e=>L(e))})})]})]})}),(0,a.jsx)(m.lG,{open:g,onOpenChange:k,children:(0,a.jsxs)(m.Cf,{className:"sm:max-w-md",children:[(0,a.jsxs)(m.c7,{children:[(0,a.jsx)(m.L3,{children:F?"세트에 추가":"새 항목 추가"}),(0,a.jsx)(m.rr,{children:"훈련 또는 세트를 추가할 수 있습니다."})]}),(0,a.jsx)(S,{onAddExercise:(e,s,l)=>{O(e,s,l,F||void 0),k(!1)},onAddSet:e=>{Z(e,F||void 0),k(!1)},onCancel:()=>k(!1)})]})})]})}function S(e){let{onAddExercise:s,onAddSet:l,onCancel:t}=e,[m,x]=(0,i.useState)("exercise"),[h,u]=(0,i.useState)("running"),[o,j]=(0,i.useState)("medium"),[p,v]=(0,i.useState)(60),[g,N]=(0,i.useState)(3);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:[(0,a.jsxs)("div",{style:{flex:"1",minWidth:"160px"},children:[(0,a.jsx)(d.J,{className:"text-sm font-medium",children:"추가할 항목"}),(0,a.jsxs)(c.l6,{value:m,onValueChange:e=>x(e),children:[(0,a.jsx)(c.bq,{className:"mt-1",children:(0,a.jsx)(c.yv,{})}),(0,a.jsxs)(c.gC,{children:[(0,a.jsx)(c.eb,{value:"exercise",children:"훈련"}),(0,a.jsx)(c.eb,{value:"set",children:"세트"})]})]})]}),"exercise"===m&&(0,a.jsxs)("div",{style:{flex:"1",minWidth:"160px"},children:[(0,a.jsx)(d.J,{className:"text-sm font-medium",children:"운동 종류"}),(0,a.jsxs)(c.l6,{value:h,onValueChange:e=>{u(e),j("medium")},children:[(0,a.jsx)(c.bq,{className:"mt-1",children:(0,a.jsx)(c.yv,{})}),(0,a.jsxs)(c.gC,{children:[(0,a.jsx)(c.eb,{value:"running",children:"달리기"}),(0,a.jsx)(c.eb,{value:"walking",children:"걷기"}),(0,a.jsx)(c.eb,{value:"rest",children:"휴식"})]})]})]})]}),"exercise"===m?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:["rest"!==h&&(0,a.jsxs)("div",{style:{flex:"1",minWidth:"160px"},children:[(0,a.jsx)(d.J,{className:"text-sm font-medium",children:"강도"}),(0,a.jsxs)(c.l6,{value:o,onValueChange:e=>j(e),children:[(0,a.jsx)(c.bq,{className:"mt-1",children:(0,a.jsx)(c.yv,{})}),(0,a.jsx)(c.gC,{children:C[h].map(e=>(0,a.jsx)(c.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{style:{flex:"1",minWidth:"160px"},children:[(0,a.jsx)(d.J,{className:"text-sm font-medium",children:"시간 (초)"}),(0,a.jsx)(r.p,{type:"number",min:"1",value:p,onChange:e=>v(Number.parseInt(e.target.value)||1),className:"mt-1"})]})]})}):(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{className:"text-sm font-medium",children:"반복횟수"}),(0,a.jsx)(r.p,{type:"number",min:"1",value:g,onChange:e=>N(Number.parseInt(e.target.value)||1),className:"mt-1"})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsx)(n.$,{onClick:()=>{"exercise"===m?s(h,o,p):l(g)},className:"flex-1 bg-primary hover:bg-primary/90",children:"추가"}),(0,a.jsx)(n.$,{variant:"outline",onClick:t,className:"flex-1 bg-transparent",children:"취소"})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[274,570,849,441,684,358],()=>s(2777)),_N_E=e.O()}]);