(()=>{var e={};e.id=615,e.ids=[615],e.modules={342:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var r=t(687),i=t(3210),n=t(4934),l=t(5192),a=t(8988),d=t(9390),c=t(3974),o=t(7826),m=t(8559),x=t(6474),u=t(5814),h=t.n(u),p=t(6189),j=t(5665);let v={running:"달리기",walking:"걷기",rest:"휴식"},g=e=>{switch(e){case"walking":return[{value:"low",label:"천천히"},{value:"medium",label:"보통"},{value:"high",label:"빠르게"}];case"running":return[{value:"low",label:"조깅"},{value:"medium",label:"보통"},{value:"high",label:"전속력"}];case"rest":return[{value:"low",label:"휴식"}];default:return[{value:"low",label:"낮음"},{value:"medium",label:"보통"},{value:"high",label:"높음"}]}},b={running:"bg-red-100 text-red-800 border-red-200",walking:"bg-blue-100 text-blue-800 border-blue-200",rest:"bg-gray-100 text-gray-800 border-gray-200"};function f({params:e}){let s=(0,p.useRouter)(),[t,u]=(0,i.useState)(null),[f,N]=(0,i.useState)(!0),[w,k]=(0,i.useState)(!1),[C,P]=(0,i.useState)(null),[$,_]=(0,i.useState)(!1),[S,q]=(0,i.useState)(null),[W,R]=(0,i.useState)({}),z=e=>{let s=Math.floor(e/60);return`${s}:${(e%60).toString().padStart(2,"0")}`},D=(e,s)=>{if(!t)return;let r=t=>t.map(t=>t.id===e?{...t,...s}:"set"===t.type?{...t,items:r(t.items)}:t);u(e=>e?{...e,items:r(e.items)}:e)},I=e=>{q(e.id),"set"===e.type?R({repetitions:e.repetitions}):R({type:e.type,duration:e.duration,intensity:e.intensity||"medium"})},A=()=>{S&&Object.keys(W).length>0&&D(S,W),q(null),R({})},F=()=>{q(null),R({})},J=(e,s,r,i)=>{if(!t)return;let n={id:(0,j.$C)(),type:e,duration:s,intensity:r};i?u(e=>e?{...e,items:M(e.items,i,n)}:e):u(e=>e?{...e,items:[...e.items,n]}:e)},E=(e,s)=>{if(!t)return;let r={id:(0,j.$C)(),type:"set",repetitions:e,items:[]};s?u(e=>e?{...e,items:M(e.items,s,r)}:e):u(e=>e?{...e,items:[...e.items,r]}:e)},M=(e,s,t)=>e.map(e=>e.id===s&&"set"===e.type?{...e,items:[...e.items,t]}:"set"===e.type?{...e,items:M(e.items,s,t)}:e),T=e=>{if(!t)return;let s=t=>t.filter(s=>s.id!==e).map(e=>"set"===e.type?{...e,items:s(e.items)}:e);u(e=>e?{...e,items:s(e.items)}:e)},G=(e,s)=>{if(!t)return;let r=t=>{let i=t.findIndex(s=>s.id===e);if(-1===i)return t.map(e=>"set"===e.type?{...e,items:r(e.items)}:e);let n=[...t];return"up"===s&&i>0?[n[i-1],n[i]]=[n[i],n[i-1]]:"down"===s&&i<t.length-1&&([n[i],n[i+1]]=[n[i+1],n[i]]),n};u(e=>e?{...e,items:r(e.items)}:e)},V=async()=>{if(t){if(console.log("[v0] 저장 시작, workout:",t),!t.name.trim()){console.log("[v0] 운동 이름이 비어있음"),alert("운동 이름을 입력해주세요.");return}if(0===t.items.length){console.log("[v0] 훈련 항목이 없음"),alert("최소 하나의 훈련을 추가해주세요.");return}_(!0);try{console.log("[v0] updateWorkout 호출 전");let e=(0,j.rW)(t);console.log("[v0] updateWorkout 결과:",e),e?(console.log("[v0] 저장 성공, 페이지 이동"),s.push(`/view/${t.id}`)):(console.log("[v0] updateWorkout이 null/undefined 반환"),alert("저장 중 오류가 발생했습니다."))}catch(e){console.error("[v0] 저장 중 오류:",e),alert("저장 중 오류가 발생했습니다.")}finally{_(!1)}}},Z=(e,s=0,t)=>{let i="set"===e.type,d=S===e.id;return(0,r.jsxs)("div",{className:`${s>0?"ml-6 border-l-2 border-border pl-4":""}`,children:[(0,r.jsx)(l.Zp,{className:"mb-2",children:(0,r.jsx)(l.Wu,{className:"p-3",children:d?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-accent rounded-full"}),(0,r.jsx)("span",{className:"font-medium",children:"세트"}),(0,r.jsx)("span",{children:"/"}),(0,r.jsx)(a.p,{type:"number",min:"1",value:W.repetitions||1,onChange:e=>R(s=>({...s,repetitions:Number.parseInt(e.target.value)||1})),className:"w-16 h-8",autoFocus:!0}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"회 반복"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.l6,{value:W.type||"running",onValueChange:e=>R(s=>({...s,type:e,intensity:"rest"===e?"low":"medium"})),children:[(0,r.jsx)(c.bq,{className:"w-20 h-8",children:(0,r.jsx)(c.yv,{})}),(0,r.jsxs)(c.gC,{children:[(0,r.jsx)(c.eb,{value:"running",children:"달리기"}),(0,r.jsx)(c.eb,{value:"walking",children:"걷기"}),(0,r.jsx)(c.eb,{value:"rest",children:"휴식"})]})]}),(0,r.jsxs)(c.l6,{value:W.intensity||"medium",onValueChange:e=>R(s=>({...s,intensity:e})),children:[(0,r.jsx)(c.bq,{className:"w-28 h-8",children:(0,r.jsx)(c.yv,{})}),(0,r.jsx)(c.gC,{children:g(W.type||"running").map(e=>(0,r.jsx)(c.eb,{value:e.value,children:e.label},e.value))})]}),(0,r.jsx)("span",{children:"/"}),(0,r.jsx)(a.p,{type:"number",min:"1",value:W.duration||60,onChange:e=>R(s=>({...s,duration:Number.parseInt(e.target.value)||1})),className:"w-16 h-8"}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"초"})]})}),(0,r.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,r.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-8 px-3 text-green-600",onClick:A,children:"확인"}),(0,r.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-8 px-3 text-red-600",onClick:F,children:"취소"})]})]}):(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-muted/50 rounded p-1 -m-1",onClick:()=>I(e),children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-accent rounded-full"}),(0,r.jsx)("span",{className:"font-medium",children:"세트"}),(0,r.jsx)("span",{children:"/"}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.repetitions,"회 반복"]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:`inline-block px-2 py-1 rounded-md text-xs font-medium border ${b[e.type]}`,children:v[e.type]}),(0,r.jsx)("span",{className:"text-sm font-medium",children:g(e.type).find(s=>s.value===(e.intensity||"medium"))?.label}),(0,r.jsx)("span",{children:"/"}),(0,r.jsx)("span",{className:"font-medium",children:z(e.duration)})]})}),i&&(0,r.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-8 px-3",onClick:()=>{P(e.id),k(!0)},children:"추가"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-8 px-3",onClick:()=>G(e.id,"up"),children:"▲ 위"}),(0,r.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-8 px-3",onClick:()=>G(e.id,"down"),children:"▼ 아래"})]}),(0,r.jsx)("div",{className:"ml-4",children:(0,r.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-8 px-3 text-destructive hover:text-destructive",onClick:()=>T(e.id),children:"삭제"})})]})]})})}),i&&e.items.length>0&&(0,r.jsx)("div",{className:"mb-2",children:e.items.map(t=>Z(t,s+1,e.id))})]},e.id)};return f?(0,r.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"로딩 중..."})]})}):t?(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)("header",{className:"border-b border-border bg-card sticky top-0 z-10",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(h(),{href:`/view/${t.id}`,children:(0,r.jsxs)(n.$,{variant:"ghost",size:"sm",className:"gap-2",children:[(0,r.jsx)(m.A,{className:"w-4 h-4"}),"뒤로"]})}),(0,r.jsx)("h1",{className:"text-xl font-semibold",children:"타이머 수정"})]}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)(n.$,{onClick:V,disabled:$,children:$?"저장 중...":"저장"})})]})})}),(0,r.jsx)("main",{className:"container mx-auto px-4 py-6 max-w-4xl",children:(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)(l.Zp,{children:[(0,r.jsx)(l.aR,{children:(0,r.jsx)(l.ZB,{children:"기본 정보"})}),(0,r.jsxs)(l.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"workout-name",children:"운동 이름"}),(0,r.jsx)(a.p,{id:"workout-name",placeholder:"예: HIIT 러닝",value:t.name,onChange:e=>u(s=>s?{...s,name:e.target.value}:s)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"workout-description",children:"설명 (선택사항)"}),(0,r.jsx)(a.p,{id:"workout-description",placeholder:"예: 고강도 인터벌 훈련",value:t.description,onChange:e=>u(s=>s?{...s,description:e.target.value}:s)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"warmup",children:"웜업 시간 (분)"}),(0,r.jsx)(a.p,{id:"warmup",type:"number",min:"0",value:Math.floor(t.warmupTime/60),onChange:e=>u(s=>s?{...s,warmupTime:60*Number.parseInt(e.target.value)||0}:s)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"cooldown",children:"쿨다운 시간 (분)"}),(0,r.jsx)(a.p,{id:"cooldown",type:"number",min:"0",value:Math.floor(t.cooldownTime/60),onChange:e=>u(s=>s?{...s,cooldownTime:60*Number.parseInt(e.target.value)||0}:s)})]})]})]})]}),(0,r.jsxs)(l.Zp,{children:[(0,r.jsx)(l.aR,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(l.ZB,{children:"훈련 구성"}),(0,r.jsxs)(n.$,{onClick:()=>{P(null),k(!0)},className:"gap-2",children:[(0,r.jsx)(x.A,{className:"w-4 h-4"}),"추가"]})]})}),(0,r.jsx)(l.Wu,{children:0===t.items.length?(0,r.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,r.jsx)("p",{className:"mb-4",children:"아직 훈련이 추가되지 않았습니다."}),(0,r.jsx)("p",{className:"text-sm",children:'위의 "추가" 버튼을 눌러 첫 번째 훈련을 만들어보세요.'})]}):(0,r.jsx)("div",{className:"space-y-1",children:t.items.map(e=>Z(e))})})]})]})}),(0,r.jsx)(o.lG,{open:w,onOpenChange:k,children:(0,r.jsxs)(o.Cf,{className:"sm:max-w-md",children:[(0,r.jsxs)(o.c7,{children:[(0,r.jsx)(o.L3,{children:C?"세트에 추가":"새 항목 추가"}),(0,r.jsx)(o.rr,{children:"훈련 또는 세트를 추가할 수 있습니다."})]}),(0,r.jsx)(y,{onAddExercise:(e,s,t)=>{J(e,s,t,C||void 0),k(!1)},onAddSet:e=>{E(e,C||void 0),k(!1)},onCancel:()=>k(!1)})]})})]}):(0,r.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"타이머를 찾을 수 없습니다"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"요청하신 타이머가 존재하지 않거나 삭제되었습니다."}),(0,r.jsx)(h(),{href:"/",children:(0,r.jsx)(n.$,{children:"홈으로 돌아가기"})})]})})}function y({onAddExercise:e,onAddSet:s,onCancel:t}){let[l,o]=(0,i.useState)("exercise"),[m,x]=(0,i.useState)("running"),[u,h]=(0,i.useState)(60),[p,j]=(0,i.useState)(3),[v,b]=(0,i.useState)("medium");return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:[(0,r.jsxs)("div",{style:{flex:"1",minWidth:"160px"},children:[(0,r.jsx)(d.J,{children:"추가할 항목"}),(0,r.jsxs)(c.l6,{value:l,onValueChange:e=>o(e),children:[(0,r.jsx)(c.bq,{children:(0,r.jsx)(c.yv,{})}),(0,r.jsxs)(c.gC,{children:[(0,r.jsx)(c.eb,{value:"exercise",children:"훈련"}),(0,r.jsx)(c.eb,{value:"set",children:"세트"})]})]})]}),"exercise"===l&&(0,r.jsxs)("div",{style:{flex:"1",minWidth:"160px"},children:[(0,r.jsx)(d.J,{children:"운동 종류"}),(0,r.jsxs)(c.l6,{value:m,onValueChange:e=>{x(e),b("rest"===e?"low":"medium")},children:[(0,r.jsx)(c.bq,{children:(0,r.jsx)(c.yv,{})}),(0,r.jsxs)(c.gC,{children:[(0,r.jsx)(c.eb,{value:"running",children:"달리기"}),(0,r.jsx)(c.eb,{value:"walking",children:"걷기"}),(0,r.jsx)(c.eb,{value:"rest",children:"휴식"})]})]})]})]}),"exercise"===l?(0,r.jsxs)("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:[(0,r.jsxs)("div",{style:{flex:"1",minWidth:"160px"},children:[(0,r.jsx)(d.J,{children:"강도"}),(0,r.jsxs)(c.l6,{value:v,onValueChange:e=>b(e),children:[(0,r.jsx)(c.bq,{children:(0,r.jsx)(c.yv,{})}),(0,r.jsx)(c.gC,{children:g(m).map(e=>(0,r.jsx)(c.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,r.jsxs)("div",{style:{flex:"1",minWidth:"160px"},children:[(0,r.jsx)(d.J,{children:"시간 (초)"}),(0,r.jsx)(a.p,{type:"number",min:"1",value:u,onChange:e=>h(Number.parseInt(e.target.value)||1)})]})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{children:"반복 횟수"}),(0,r.jsx)(a.p,{type:"number",min:"1",value:p,onChange:e=>j(Number.parseInt(e.target.value)||1)})]}),(0,r.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,r.jsx)(n.$,{onClick:()=>{"exercise"===l?e(m,u,v):s(p)},className:"flex-1",children:"추가"}),(0,r.jsx)(n.$,{variant:"outline",onClick:t,className:"flex-1 bg-transparent",children:"취소"})]})]})}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1038:(e,s,t)=>{Promise.resolve().then(t.bind(t,8680))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3734:(e,s,t)=>{Promise.resolve().then(t.bind(t,342))},3873:e=>{"use strict";e.exports=require("path")},8680:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Doo\\\\workspace_git\\\\ReactProject\\\\interval-timer\\\\app\\\\edit\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Doo\\workspace_git\\ReactProject\\interval-timer\\app\\edit\\[id]\\page.tsx","default")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9573:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c});var r=t(5239),i=t(8088),n=t(8170),l=t.n(n),a=t(893),d={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>a[e]);t.d(s,d);let c={children:["",{children:["edit",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8680)),"D:\\Doo\\workspace_git\\ReactProject\\interval-timer\\app\\edit\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8014)),"D:\\Doo\\workspace_git\\ReactProject\\interval-timer\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["D:\\Doo\\workspace_git\\ReactProject\\interval-timer\\app\\edit\\[id]\\page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/edit/[id]/page",pathname:"/edit/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[817,304,297,48],()=>t(9573));module.exports=r})();